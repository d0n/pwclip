image: ruby:2.5

variables:
  GLTOKEN: $(cat $GLTOKEN)

before_script:
  - apt-get update
  - apt-get -y upgrade
  - apt-get install -y pylint3 python3-argcomplete python3-yaml tree git
  - tree

build:
  stage: build
  script:
    - sed -i "s/\(\s*\)url = git@bugfisch.net:\(.*\)/\1url = https:\/\/d0n:$GLTOKEN@bugfisch.net\/\2/" .gitmodules
    - git submodule update --init --recursive
    - pylint3 --rcfile=.pylintrc -E ../pwclip
